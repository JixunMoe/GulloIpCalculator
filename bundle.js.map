{"version":3,"file":"bundle.js","sources":["../src/calculator.js","../src/app.js"],"sourcesContent":["function invalidIpPart(part) {\n    return part <= 0 || part > 255;\n}\n\nconst locations = ['Germany', 'Canada', 'Bulgaria', 'Pennsylvania', 'Finland'];\nconst database = {\n    10: '88.198.50.201',\n    12: '148.251.3.246',\n    20: '192.99.148.130',\n    30: '82.118.234.154',\n    40: '199.187.125.84',\n    42: '76.72.171.42',\n    50: '95.216.20.157',\n};\n\nexport default function calculateIp(internal) {\n    const ipParts = internal.match(/^10\\.10\\.(\\d{1,3})\\.(\\d{1,3})$/);\n    if (!ipParts) {\n        return;\n    }\n\n    const serverIdInfo = parseInt(ipParts[1], 10);\n    const serverAddr = parseInt(ipParts[2], 10);\n\n    if (invalidIpPart(serverIdInfo) || invalidIpPart(serverAddr)) {\n        return;\n    }\n\n    const serverId = serverIdInfo & ~1;\n    const highPort = (serverIdInfo & 1);\n\n    const ip = database[serverId];\n    if (!ip) return;\n\n    const serverNameIndex = ((serverIdInfo / 10)|0) - 1;\n\n    const portStart = highPort * 30 + serverAddr * 100;\n    const portEnd = portStart + 19;\n    const sshPort = portEnd + 1;\n    \n    return {\n        ip,\n        name: locations[serverNameIndex],\n        portStart,\n        portEnd,\n        sshPort,\n    };\n}\n","import calculateIp from \"./calculator\";\n\nconst $ip = document.getElementById('ip');\nconst $f = document.getElementById('ip-form');\nconst $result = document.getElementById('result');\n$ip.onblur = $ip.onchange = $ip.onkeyup = updateIp;\n$f.onsubmit = function (e) {\n    e.preventDefault();\n    updateIp();\n}\n\nconst state = {};\nfunction updateIp() {\n    if ($ip.value === state.ip) return;\n\n    const ip = state.ip = $ip.value;\n    const information = calculateIp(ip);\n\n    if (!information) {\n        $result.textContent = '\\n\\nInvalid IP or unknown IP.';\n        return;\n    }\n\n    const {\n        ip: extIp,\n        name,\n        portStart,\n        portEnd,\n        sshPort,\n    } = information;\n\n    $result.textContent = formatText([\n        ['Internal IP', ip],\n        ['External IP', extIp],\n        ['Location', name],\n        ['Port (start)', portStart.toString()],\n        ['Port (end)', portEnd.toString()],\n        ['Port (ssh)', sshPort.toString()],\n    ]);\n}\n\nfunction formatText(items) {\n    const [aMax, bMax] = items.reduce(([aLen, bLen], [a, b]) => [Math.max(a.length, aLen), Math.max(b.length, bLen)], [0, 0]);\n    return items.map(([a, b]) => padString(a, ' ', '', aMax) + '   ' + padString(b, '', ' ', bMax)).join('\\n');\n}\n\nfunction padString(str, left, right, len) {\n    while(str.length < len) {\n        str = left + str + right;\n    }\n\n    return str;\n}\n\n[].forEach.call(document.getElementsByTagName('input'), i => i.disabled = false);\n\nconst hashIp = location.hash.slice(1);\nif (hashIp) {\n    $ip.value = hashIp;\n}\n\nsetTimeout(updateIp);\n"],"names":["const"],"mappings":"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"}