{"version":3,"file":"bundle.js","sources":["../src/app.js"],"sourcesContent":["function invalidIpPart(part) {\n\treturn part <= 0 || part > 255;\n}\n\nconst locations = ['Germany', 'Canada', 'Bulgaria', 'Pennsylvania', 'Finland'];\nconst database = {\n\t10: '88.198.50.201',\n\t12: '148.251.3.246',\n\t20: '192.99.148.130',\n\t30: '82.118.234.154',\n\t40: '199.187.125.84',\n\t42: '76.72.171.42',\n\t50: '95.216.20.157',\n};\n\nfunction calculateIp(internal) {\n\tconst ipParts = internal.match(/^10\\.10\\.(\\d{1,3})\\.(\\d{1,3})$/);\n\tif (!ipParts) {\n\t\treturn;\n\t}\n\n\tconst serverIdInfo = parseInt(ipParts[1], 10);\n\tconst serverAddr = parseInt(ipParts[2], 10);\n\n\tif (invalidIpPart(serverIdInfo) || invalidIpPart(serverAddr)) {\n\t\treturn;\n\t}\n\n\tconst serverId = serverIdInfo & ~1;\n\tconst highPort = (serverIdInfo & 1);\n\n    const ip = database[serverId];\n    if (!ip) return;\n\n\tconst serverNameIndex = ((serverIdInfo / 10)|0) - 1;\n\n\tconst portStart = highPort * 30 + serverAddr * 100;\n\tconst portEnd = portStart + 19;\n\tconst sshPort = portEnd + 1;\n\t\n\treturn {\n        ip,\n        name: locations[serverNameIndex],\n\t\tportStart,\n\t\tportEnd,\n\t\tsshPort,\n\t};\n}\n\nconst $ip = document.getElementById('ip');\nconst $f = document.getElementById('ip-form');\nconst $result = document.getElementById('result');\n$ip.onblur = $ip.onchange = $ip.onkeyup = updateIp;\n$f.onsubmit = function (e) {\n    e.preventDefault();\n    updateIp();\n}\n\nconst state = {};\nfunction updateIp() {\n    if ($ip.value === state.ip) return;\n\n    const ip = state.ip = $ip.value;\n    const information = calculateIp(ip);\n\n    if (!information) {\n        $result.textContent = '\\n\\nInvalid IP or unknown IP.';\n        return;\n    }\n\n    const {\n        ip: extIp,\n        name,\n\t\tportStart,\n\t\tportEnd,\n\t\tsshPort,\n\t} = information;\n\n    $result.textContent = formatText([\n        ['Internal IP', ip],\n        ['External IP', extIp],\n        ['Location', name],\n        ['Port (start)', portStart.toString()],\n        ['Port (end)', portEnd.toString()],\n        ['Port (ssh)', sshPort.toString()],\n    ]);\n}\n\nfunction formatText(items) {\n    const [aMax, bMax] = items.reduce(([aLen, bLen], [a, b]) => [Math.max(a.length, aLen), Math.max(b.length, bLen)], [0, 0]);\n    return items.map(([a, b]) => padString(a, ' ', '', aMax) + '   ' + padString(b, '', ' ', bMax)).join('\\n');\n}\n\nfunction padString(str, left, right, len) {\n    while(str.length < len) {\n        str = left + str + right;\n    }\n\n    return str;\n}\n\n[].forEach.call(document.getElementsByTagName('input'), i => i.disabled = false);\n\nconst hashIp = location.hash.slice(1);\nif (hashIp) {\n    $ip.value = hashIp;\n}\n\nsetTimeout(updateIp);\n"],"names":["const"],"mappings":"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"}